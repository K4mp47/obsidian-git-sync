- Struttura fisica di un disco magnetico, 
	- Insieme di dischi (piatti) magnetici che ruotano su un perno (rotore) 
		- Alta velocità 
		- Composto da tracce, che a loro volta contengono settori 
		- Cilindri: formati da gruppi verticali di tracce 
		- Testina di lettura/scrittura molto vicina (micron) 
		- Braccio mobile collegato ad un attuatore (boom) 
		- Movimento della testina fra i cilindri
		- Ricerca del cilindro (seek)
	- ![[Pasted image 20240113110831.png]]
- Indici di prestazione
	- Tempo di ricerca(seek)
		- Tempo impiegato per spostarsi tra i cilindri
	- Latenza 
		- Ritardo dovuto alla rotazione
	- Trasmissione
		- Tempo di trasferimento dei dati cercati per finire tutti sotto la testina di lettura scrittura
	- ![[Pasted image 20240113111043.png]]
- Tecnologie RAID
	- Usata per aumentare l'affidabilità
	- parallelismo per migliorare le prestazioni dei dischi
	- I dischi sono visti come uno unico
	- Necessita di
		- Gestione dei dischi
		- Gestione delle copie dei dati stessi e della loro distribuzione
	- ![[Pasted image 20240113113214.png]]
	- ![[Pasted image 20240113113222.png]]
- Formattazione dei dischi
- Basso livello
	- ![[Pasted image 20240113113410.png]]
	- ECC informazioni ridondanti per recupero di errori, es. 16 byte
	- Cylinder skew
		- Per ogni traccia il settore 0 è spostato rispetto alla traccia precedente per migliorare le prestazioni
		- ![[Pasted image 20240113113725.png]]
		- ![[Pasted image 20240113113743.png]]
		- Partizionamento del disco
			- tabella delle partizioni e dimensione di ogni partizione
- Alto livello
	- Definisce
		- Blocco di avvio
		- Gestione spazio libero
		- Directory principale
		- File System
- Buffer Cache: memorizzazione di una copia dei dati su disco in memoria più veloce 
	- Situato in memoria principale, onboard cache, o sul controller del disco 
	- Tempi di accesso molto minori dell’accesso al disco 
	- Può essere usato come un buffer per ritardare la scrittura dei dati finché disco è sotto carico leggero 
		- Potenziale incoerenza 
		- Gestione 
			- Cache write-back (scrivi alla fine) 
				- i dati non sono scritti su disco immediatamente, ma accorpati 
				- Migliora le prestazioni 
				- Periodicamente flushed verso il disco 
			- Write-through caching (scrivi subito) 
				- Scrive contemporaneamente su disco e cache 
				- Riduce le prestazioni rispetto al write-back, ma garantisce la coerenza 
			- Possibile cache preventivo di più settori da parte del controller 
			- Nota: cache del controller indipendente dalla cache del sistema operativo per blocchi non richiesti ma letti per convenienza della posizione
	- Il contenuto della memoria principale potrebbe essere perso per mancanza di corrente o guasto del sistema
	- Problemi di affidabilità 
		- uso di RAID 
	- Problemi: crash e errori durante la lettura con corruzione dei dati 
	- Memoria stabile: sottosistema disco che o scrive correttamente o non esegue niente. 
	- Assumendo di disporre di una coppia di dischi identici D1 e D2 e corrispondenti. - 
	- Operazione dei scrittura stabile 
		- scrive il blocco in D1, se non è corretto ripete n volte se fallisce n volte mappa il blocco con uno di riserva e ripete eventualmente ripete finché non completa copia sul blocco corrispondente di D2 (scrittura corretta senza crash della CPU) 
	- Operazione dei lettura stabile 
		- legge il blocco da D1, se non è corretto ripete n volte se fallisce n volte legge da D2 (probabilità di doppio errore trascurabile) 
	- Ripristino da crash 
		- scansione e confronto dei blocchi da D1 e D2 se uguali e validi è completato se uno è errato viene riscritto con l’altro corrispondente se validi ma diversi D1 sovrascrive D2
	- ![[Pasted image 20240113120445.png]]
- Gestione errori 
	- ![[Pasted image 20240113120336.png]]
	- 
- Scheduling
	- ![[Pasted image 20240113114023.png]]
	- I primi algoritmi di scheduling si concentrano sull'ottimizzazione del tempo di seek, i moderni sistemi ottimizzano anche  il tempo di rotazione
	- Criteri di misura
		- Throughput 
			- Numero di richieste servite per unità di tempo 
		- Tempo medio di risposta 
			- Tempo medio di attesa che la richiesta sia servita e di servizio
		- Varianza del tempo di risposta 
			- Misura della prevedibilità del tempo di risposta
	- Obbiettivi
		- Massimizzare throughput
		- Minimizzare i tempi di risposta
	- FCFS
		- Equo
		- Previene l'attesa infinita
		- basso overhead
		- Lunghi tempi di attesa (dati distribuiti in maniera casuale)
		- Sotto carico pesante, il sistema può comportarsi in modo critico(trashing)
		- ![[Pasted image 20240113114240.png]]
	- SSTF(Shortest-Seek-Time-First)
		- throughput maggiore e tempi di risposta inferiori rispetto al FCFS
		- soluzione ragionevole per i sistemi batch
		- Non garantisce equità
		- Possibile attesa infinita
		- Alta varianza nei tempi di risposta
		- Tempi generalmente inaccettabili per sistemi interattivi
		- ![[Pasted image 20240113114437.png]]
	- SCAN
		- Non cambia direzione fino al raggiungimento della fine del disco
		- Algoritmo dell'ascensore
		- Attesa infinita ancora possibile
		- Non equo
		- Migliorata varianza nei tempi di risposta rispetto a SSTF
		- ![[Pasted image 20240113114622.png]]
	- C-SCAN
		- Simile allo SCAN, ma salta al cilindro più esterno una volta finita una scansione verso l'interno
		- Ulteriore riduzione della varianza dei tempi di risposta, a scapito del throughput e del tempo medio di risposta
		- ![[Pasted image 20240113114738.png]]
	- FSSCAN  
		- Congela periodicamente la coda di richieste al disco e serve solo le richieste in coda in quel momento
		- ![[Pasted image 20240113114957.png]]
	- N-Step SCAN
		- Serve solo le prime n richieste nella coda in quel momento
		- ![[Pasted image 20240113115006.png]]
	- Entrambe le strategie prevengono l’attesa infinita 
	- Entrambe riducono la varianza dei tempi di risposta rispetto a SCAN
	- LOOK Migliora SCAN
		-  continua fino al termine dell’attraversamento attuale per servire richieste, se non ci sono cambia direzione 
		- Muove il braccio del disco verso il bordo esterno del disco se non ci sono richieste pendenti per tali regioni 
		- Migliora l'efficienza evitando operazioni inutili di ricerca 
		- Throughput elevato
	- C-LOOK Migliora C-SCAN
		- Combinazione di LOOK e C-SCAN 
		- Quando non ci sono richieste nell’attraversamento verso l’interno si sposta verso le richieste posizionate più all’esterno senza servirne altre in mezzo e inizia un nuovo attraversamento 
		- Minor varianza dei tempi di risposta di LOOK, a scapito della throughput
	- ![[Pasted image 20240113115140.png]]
	- ![[Pasted image 20240113115157.png]]
- Algoritmi di Ottimizzazione Rotazionale
	- Tempi di ricerca sempre un punto debole, stesso ordine della latenza rotazionale
	- Questi algoritmi puntano alla riduzione della latenza
	- Importante per accesso a piccole porzioni di dati distribuiti casualmente sul disco
	- SLTF(Short Latency Time First)
		- In un dato cilindro, serve le richieste con la minima richiesta di rotazione
		- Facile implementazione
		- Accodamento dei settori
		- Raggiunge prestazioni quasi ottimali
		- ![[Pasted image 20240113115529.png]]
	- SPTF(Shortest Positioning Time First)
		- Tempo di posizionamento: somma di tempo di ricerca e la latenza di rotazione 
		- SPTF serve per prima la richiesta con il minimo tempo di posizionamento 
		- Buone prestazioni 
		- Può causare attesa infinita (cilindri più sui bordi)
	- SATF(Shortest Access Time First)
		- Variante di SPTF 
		- Tempo di accesso: tempo di posizionamento più il tempo di trasmissione 
		- Throughput elevato 
		- Anche in questo caso, può causare attesa infinita
	- Sia SPTF e SATF possono implementare LOOK (ahead) per migliorare le prestazioni 
	- Svantaggio 
		- Sia SPTF e SATF richiedono la conoscenza delle caratteristiche di prestazioni del disco che potrebbero non essere immediatamente disponibili (tempi di seek, latenza, posizioni dei settori) 
		- Possibile mascheramento al S.O. per controllo degli errori, correzione dei dati e riassegnazione trasparente dei settori danneggiati
	- ![[Pasted image 20240113115745.png]]
- Non sempre lo scheduling è utile
	- Non aiuta sensibilmente nei sistemi process-bound
	- Benefici all'aumentare della casualità e multiprogrammazione
	- Richieste al disco  in sequenze imprevedibili
	- Per distribuzioni non uniformi nelle richieste, può portare ad un calo delle prestazioni
	- Le tecniche di organizzazione dei file a volte contrastano algoritmi di scheduling 
	- Geometria reale e geometria virtuale possono vanificare i vantaggi degli algoritmi di scheduling
- Altre tecniche di ottimizzazione del disco
	- Deframmentazione del disco
	- Compressione
	- Copie multiple di dati richiesti più frequentemente 
		- Diverse posizioni del disco 
		- Accesso alla copia più vicina alla testina di lettura-scrittura 
		- Minor tempo di ricerca e di rotazione 
		- Può comportare overhead significativi di memoria 
	- Adatta per dati in sola lettura o rare modifiche (congruenza delle copie) 
	- Accorpamento di record (blocking) 
		- Leggere / scrivere più record come unico blocco di dati 
		- Riduce i tempi 
	- Anticipazione del braccio del disco 
		- Quando inattivo, sposta il braccio del disco nella posizione dove è maggiore la probabilità del prossimo accesso ai dati, o al centro 
		- Minor tempo di attesa specie in caso di località nella zona prevista 
		- Se il braccio del disco predice in modo non corretto il prossimo accesso al disco, le prestazioni possono subire forti degradazioni 
		- Meno efficace con la multiprogrammazione
[[Software IO]]
